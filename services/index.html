<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>
  <script>
    const aps = _.sortBy(
      [
        {
          planDuration: 30,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e5eef267d631d2616429793",
          planName: "Basic Verizon",
          proxyQuantity: 50,
          planPrice: 113,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e5eef5384c6e5263ba4f987",
          planName: "Pro Verizon",
          proxyQuantity: 150,
          planPrice: 293,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e5eef84a1eb9726714e8a12",
          planName: "Advanced Verizon",
          proxyQuantity: 100,
          planPrice: 210,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e6d329cc4698d5f685043df",
          planName: "Basic Comcast",
          proxyQuantity: 50,
          planPrice: 130,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e6d329dc4698d5f685043e0",
          planName: "Pro Comcast",
          proxyQuantity: 150,
          planPrice: 315,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e6d329fc4698d5f685043e1",
          planName: "Advanced Comcast",
          proxyQuantity: 100,
          planPrice: 240,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e810001dfaabc53f99c61ec",
          planName: "Small Verizon",
          proxyQuantity: 25,
          planPrice: 59,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e812cf6dfaabc53f99c61ed",
          planName: "Small Comcast",
          proxyQuantity: 25,
          planPrice: 68,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ad10cdfae355e4a5ab90",
          planName: "Basic Verizon Daily",
          proxyQuantity: 50,
          planPrice: 57,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ad48cdfae355e4a5ab91",
          planName: "Pro Verizon Daily",
          proxyQuantity: 150,
          planPrice: 143,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ad60cdfae355e4a5ab92",
          planName: "Advanced Verizon Daily",
          proxyQuantity: 100,
          planPrice: 105,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82adcccdfae355e4a5ab93",
          planName: "Basic Comcast Daily",
          proxyQuantity: 50,
          planPrice: 67,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ade2cdfae355e4a5ab94",
          planName: "Pro Comcast Daily",
          proxyQuantity: 150,
          planPrice: 150,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82adf5cdfae355e4a5ab95",
          planName: "Advanced Comcast Daily",
          proxyQuantity: 100,
          planPrice: 115,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 0,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ae53cdfae355e4a5ab96",
          planName: "Small Verizon Daily",
          proxyQuantity: 25,
          planPrice: 30,
          __v: 0,
        },
        {
          planDuration: 1,
          serverType: 1,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5e82ae6acdfae355e4a5ab97",
          planName: "Small Comcast Daily",
          proxyQuantity: 25,
          planPrice: 1,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 3,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5ea47895842bee2ef56b7330",
          planName: "Small Captcha",
          proxyQuantity: 5,
          planPrice: 8,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 3,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5ea47898842bee2ef56b7331",
          planName: "Basic Captcha",
          proxyQuantity: 10,
          planPrice: 13,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 3,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5ea47899842bee2ef56b7332",
          planName: "Advanced Captcha",
          proxyQuantity: 25,
          planPrice: 30,
          __v: 0,
        },
        {
          planDuration: 30,
          serverType: 3,
          enabled: true,
          public: true,
          stock: 0,
          _id: "5ecac81e9570a0059918526b",
          planName: "Pro Captcha",
          proxyQuantity: 50,
          planPrice: 50,
          __v: 0,
        },
      ],
      ["planDuration"]
    );

    console.log(aps);

    let planState = {};

    aps.forEach((ap) => {
      if (!planState[ap.planDuration]) {
        planState[ap.planDuration] = {};
      }
      if (!planState[ap.planDuration][ap.serverType]) {
        planState[ap.planDuration][ap.serverType] = {};
      }

      planState[ap.planDuration][ap.serverType] = ap;
    });
  </script>
</html>
